<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <title>Title</title>
    <link rel="stylesheet" href="css/zui.min.css">
    <link rel="stylesheet" href="css/index.css">
    <script src="node_modules/jquery/dist/jquery.min.js"></script>
    <script src="js/zui.js"></script>
    <script src="js/vue.js"></script>
</head>
<body>
<div id="el" class="index">
    <div class="calendar">
        <table class="table table-bordered">
            <thead>
            <tr>
                <th>星期日</th>
                <th>星期一</th>
                <th>星期二</th>
                <th>星期三</th>
                <th>星期四</th>
                <th>星期五</th>
                <th>星期六</th>
            </tr>
            </thead>
            <tbody>
            <tr v-for="(v,index) in calendar">
                <!--<td v-for="(v2,index2) in v" v-if="JSON.stringify(v2) == '{}'">{{ v2 }}</td>-->
                <td v-for="(v2,index2) in v">{{ v2.date }}</td>
            </tr>
            </tfoot>
        </table>
    </div>
</div>
</body>
<script>
    var cur_year,cur_month,cur_date,weeks_ch
    //利用构造函数创建对象
    function calendar(date,week){
//        this.date=cur_year+'-'+cur_month+'-'+date;
        this.date=date;
//        if(date==cur_date){
//            this.week = "今天";
//        }else if(date==cur_date+1){
//            this.week = "明天";
//        }else{
//            this.week = '星期' + week;
//        }
    }

    var vm=new Vue({
        el:'#el',
        data:{
            calendar:[]
        },
        mounted:function () {
            this.init()
        },
        methods:{
            init:function () {
                const date = new Date();
                cur_year = date.getFullYear();
                cur_month = date.getMonth() + 1;
                cur_date=date.getDate();
                weeks_ch = ['日', '一', '二', '三', '四', '五', '六'];

                //当前月份的天数
                var monthLength= this.getThisMonthDays(cur_year, cur_month)
                //当前月份的第一天是星期几
                var week = this.getFirstDayOfWeek(cur_year, cur_month)
                var x = week;
                var flag=[]
                var SecArr=[]
                var start=0;
                for(var i=1;i<=monthLength;i++){
                    //当循环完一周后，初始化再次循环
                    if(x>6){
                        x=0;
                    }
                    //利用构造函数创建对象
                    flag[i] = new calendar(i, [weeks_ch[x]][0])
                    x++;
                }
                console.log(flag);
                flag.shift()
                for(var i=0;i<Math.ceil(flag.length+week/7);i++){
                    if(i==0){
                        SecArr.push(flag.slice(start,start+7-week))
                        start=start+7-week
                    }else{
                        SecArr.push(flag.slice(start,start+7))
                        start=start+7
                    }
                }
//                console.log(week);
//                console.log('111111111111');
                for(var i=0;i<week;i++){
                    SecArr[0].unshift({date:''})
                }
                this.calendar=SecArr
            },
            getThisMonthDays:function(year, month) {
                return new Date(year, month, 0).getDate();
            },
            //计算一个月的第一天是星期几
            getFirstDayOfWeek:function(year, month) {
                return new Date(Date.UTC(year, month - 1, 1)).getDay();
            }
        }
    })
    console.log(vm);
</script>
</html>